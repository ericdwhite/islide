<html>
<head>
<title>A simple test to make sure that environment is setup correctly</title>
  <script type="text/javascript" src="../javascripts/jsunit/app/jsUnitCore.js"></script>
  <script type="text/javascript" src="../javascripts/functional.js"></script>
  <script type="text/javascript" src="../javascripts/jsmock.js"></script>

  <script type="text/javascript">
    //
    // Normally this is the code under test and should
    // be placed in its own JavaScript files.
    function userSubmits(message, buttonElement) {
      buttonElement.submit();
    }

    //
    // Tests

    var setUpCalled = false;
    function setUp() {
      // if this is called it is most likely
      // that tearDown() will also be called.
      setUpCalled = true;
    }

    // This should pass if JsUnit is correctly
    // installed as it should have called setup.
    function testSetupCalled() {
      assertEquals(true, setUpCalled);
    }

    // Should fail
    function testBooleanFailure() {
      assertEquals(true, false);
    }

    // Should fail
    function testStringFailure() {
      assertEquals("the same", "not the same");
    }

    // Should pass if JsMock is working
    function testJsMockVerify() {
      var mockControl = new MockControl();
      var buttonMock = mockControl.createMock({ 
        submit : function() {
           this.value = "Clicked";
        }
      });

      buttonMock.expects().submit();

      // Normally the buttonMock would be a real
      // button element.
      userSubmits("Some user message", buttonMock);

      mockControl.verify();
    }
  </script>
</head>
<body>
<h1>This takes makes sure that JsUnit, JSMock, and Functional are all working</h1>
</body>
</html>
